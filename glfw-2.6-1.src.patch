diff -urN -x CYGWIN-PATCHES -x 'aclocal.m4*' -x autom4te.cache -x config.cache -x config.log -x config.status -x config.h -x config.h.in -x ABOUT-NLS -x Makefile.in.in -x Makevars.template -x '*SlackBuild*' -x '*.egg-info' -x '*.class' -x '*.pyc' -x '*.mo' -x '*.gmo' -x '*.orig' -x '*.rej' -x '*.spec' -x '*.temp' -x '*~' -x '*.stackdump' -x COPYING -x INSTALL -x compile -x config-ml.in -x config.guess -x config.sub -x depcomp -x elisp-comp -x install-sh -x ltmain.sh -x mdate-sh -x missing -x mkinstalldirs -x py-compile -x symlink-tree -x texinfo.tex -x ylwrap -x config.rpath -x omf.make -x xmldocs.make -x gnome-doc-utils.make -x gnome-doc-utils.m4 -x intltool.m4 -x intltool-extract -x intltool-extract.in -x intltool-merge -x intltool-merge.in -x intltool-update -x intltool-update.in origsrc/glfw/compile.sh src/glfw/compile.sh
--- origsrc/glfw/compile.sh	2007-07-01 04:46:46.000000000 -0500
+++ src/glfw/compile.sh	2007-09-01 23:27:59.906250000 -0500
@@ -68,6 +68,7 @@
 LDFLAGS=
 INCS=
 LIBS="-lGL -lX11"
+PIC="-fPIC"
 
 
 ##########################################################################
@@ -88,6 +89,12 @@
   LDFLAGS="-shared"
   echo " Linux" 1>&6
   ;;
+xCYGWIN*)
+  CFLAGS="$CFLAGS"
+  LDFLAGS="-shared -Wl,--enable-auto-image-base -Wl,--out-implib,libglfw.dll.a"
+  PIC=""
+  echo " Cygwin" 1>&6
+  ;;
 xDarwin)
   CFLAGS="$CFLAGS"
   LDFLAGS="-flat_namespace -undefined suppress"
@@ -254,11 +261,11 @@
 EOF
 
 # Try -pthread (most systems)
-CFLAGS_THREAD="-pthread"
+CFLAGS_THREAD=""
 CFLAGS_OLD="$CFLAGS"
 CFLAGS="$CFLAGS $CFLAGS_THREAD"
 LIBS_OLD="$LIBS"
-LIBS="$LIBS -pthread"
+LIBS="$LIBS"
 if { (eval echo $config_script: \"$link\") 1>&5; (eval $link) 2>&5; }; then
   rm -rf conftest*
   has_pthread=yes
@@ -564,6 +571,7 @@
 echo "LDFLAGS      = $LDFLAGS" >>$MKNAME
 echo "LFLAGS       = $LFLAGS" >>$MKNAME
 echo "LIBS         = $LIBS" >>$MKNAME
+echo "PIC          = $PIC" >>$MKNAME
 echo " " >>$MKNAME
 cat './lib/x11/Makefile.x11.in' >>$MKNAME
 
diff -urN -x CYGWIN-PATCHES -x 'aclocal.m4*' -x autom4te.cache -x config.cache -x config.log -x config.status -x config.h -x config.h.in -x ABOUT-NLS -x Makefile.in.in -x Makevars.template -x '*SlackBuild*' -x '*.egg-info' -x '*.class' -x '*.pyc' -x '*.mo' -x '*.gmo' -x '*.orig' -x '*.rej' -x '*.spec' -x '*.temp' -x '*~' -x '*.stackdump' -x COPYING -x INSTALL -x compile -x config-ml.in -x config.guess -x config.sub -x depcomp -x elisp-comp -x install-sh -x ltmain.sh -x mdate-sh -x missing -x mkinstalldirs -x py-compile -x symlink-tree -x texinfo.tex -x ylwrap -x config.rpath -x omf.make -x xmldocs.make -x gnome-doc-utils.make -x gnome-doc-utils.m4 -x intltool.m4 -x intltool-extract -x intltool-extract.in -x intltool-merge -x intltool-merge.in -x intltool-update -x intltool-update.in origsrc/glfw/lib/x11/Makefile.x11.in src/glfw/lib/x11/Makefile.x11.in
--- origsrc/glfw/lib/x11/Makefile.x11.in	2007-07-01 04:46:46.000000000 -0500
+++ src/glfw/lib/x11/Makefile.x11.in	2007-09-01 23:25:29.203125000 -0500
@@ -105,7 +105,8 @@
 # Rule for building shared library
 ##########################################################################
 libglfw.so: $(SHARED_OBJS)
-	$(CC) $(LDFLAGS) -o $@ $(SHARED_OBJS) $(LFLAGS) $(LIBS)
+	$(CC) $(LDFLAGS) -o cygglfw.dll $(SHARED_OBJS) $(LFLAGS) $(LIBS)
+	touch $@
 
 
 ##########################################################################
@@ -179,65 +180,65 @@
 # Rules for building shared library object files
 ##########################################################################
 so_enable.o: ../enable.c ../internal.h platform.h
-	$(CC) -fPIC $(CFLAGS) -o $@ ../enable.c
+	$(CC) $(PIC) $(CFLAGS) -o $@ ../enable.c
 
 so_fullscreen.o: ../fullscreen.c ../internal.h platform.h
-	$(CC) -fPIC $(CFLAGS) -o $@ ../fullscreen.c
+	$(CC) $(PIC) $(CFLAGS) -o $@ ../fullscreen.c
 
 so_glext.o: ../glext.c ../internal.h platform.h
-	$(CC) -fPIC $(CFLAGS) -o $@ ../glext.c
+	$(CC) $(PIC) $(CFLAGS) -o $@ ../glext.c
 
 so_image.o: ../image.c ../internal.h platform.h
-	$(CC) -fPIC $(CFLAGS_SPEED) -o $@ ../image.c
+	$(CC) $(PIC) $(CFLAGS_SPEED) -o $@ ../image.c
 
 so_init.o: ../init.c ../internal.h platform.h
-	$(CC) -fPIC $(CFLAGS) -o $@ ../init.c
+	$(CC) $(PIC) $(CFLAGS) -o $@ ../init.c
 
 so_input.o: ../input.c ../internal.h platform.h
-	$(CC) -fPIC $(CFLAGS) -o $@ ../input.c
+	$(CC) $(PIC) $(CFLAGS) -o $@ ../input.c
 
 so_joystick.o: ../joystick.c ../internal.h platform.h
-	$(CC) -fPIC $(CFLAGS) -o $@ ../joystick.c
+	$(CC) $(PIC) $(CFLAGS) -o $@ ../joystick.c
 
 so_stream.o: ../stream.c ../internal.h platform.h
-	$(CC) -fPIC $(CFLAGS) -o $@ ../stream.c
+	$(CC) $(PIC) $(CFLAGS) -o $@ ../stream.c
 
 so_tga.o: ../tga.c ../internal.h platform.h
-	$(CC) -fPIC $(CFLAGS_SPEED) -o $@ ../tga.c
+	$(CC) $(PIC) $(CFLAGS_SPEED) -o $@ ../tga.c
 
 so_thread.o: ../thread.c ../internal.h platform.h
-	$(CC) -fPIC $(CFLAGS) -o $@ ../thread.c
+	$(CC) $(PIC) $(CFLAGS) -o $@ ../thread.c
 
 so_time.o: ../time.c ../internal.h platform.h
-	$(CC) -fPIC $(CFLAGS) -o $@ ../time.c
+	$(CC) $(PIC) $(CFLAGS) -o $@ ../time.c
 
 so_window.o: ../window.c ../internal.h platform.h
-	$(CC) -fPIC $(CFLAGS) -o $@ ../window.c
+	$(CC) $(PIC) $(CFLAGS) -o $@ ../window.c
 
 so_x11_enable.o: x11_enable.c ../internal.h platform.h
-	$(CC) -fPIC $(CFLAGS) -o $@ x11_enable.c
+	$(CC) $(PIC) $(CFLAGS) -o $@ x11_enable.c
 
 so_x11_fullscreen.o: x11_fullscreen.c ../internal.h platform.h
-	$(CC) -fPIC $(CFLAGS) -o $@ x11_fullscreen.c
+	$(CC) $(PIC) $(CFLAGS) -o $@ x11_fullscreen.c
 
 so_x11_glext.o: x11_glext.c ../internal.h platform.h
-	$(CC) -fPIC $(CFLAGS) -o $@ x11_glext.c
+	$(CC) $(PIC) $(CFLAGS) -o $@ x11_glext.c
 
 so_x11_init.o: x11_init.c ../internal.h platform.h
-	$(CC) -fPIC $(CFLAGS) -o $@ x11_init.c
+	$(CC) $(PIC) $(CFLAGS) -o $@ x11_init.c
 
 so_x11_joystick.o: x11_joystick.c ../internal.h platform.h
-	$(CC) -fPIC $(CFLAGS) -o $@ x11_joystick.c
+	$(CC) $(PIC) $(CFLAGS) -o $@ x11_joystick.c
 
 so_x11_thread.o: x11_thread.c ../internal.h platform.h
-	$(CC) -fPIC $(CFLAGS) -o $@ x11_thread.c
+	$(CC) $(PIC) $(CFLAGS) -o $@ x11_thread.c
 
 so_x11_time.o: x11_time.c ../internal.h platform.h
-	$(CC) -fPIC $(CFLAGS) -o $@ x11_time.c
+	$(CC) $(PIC) $(CFLAGS) -o $@ x11_time.c
 
 so_x11_window.o: x11_window.c ../internal.h platform.h
-	$(CC) -fPIC $(CFLAGS) -o $@ x11_window.c
+	$(CC) $(PIC) $(CFLAGS) -o $@ x11_window.c
 
 so_x11_keysym2unicode.o: x11_keysym2unicode.c ../internal.h platform.h
-	$(CC) -fPIC $(CFLAGS) -o $@ x11_keysym2unicode.c
+	$(CC) $(PIC) $(CFLAGS) -o $@ x11_keysym2unicode.c
 
